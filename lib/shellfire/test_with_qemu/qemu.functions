# This file is part of libertine. It is subject to the licence terms in the COPYRIGHT file found in the top-level directory of this distribution and at https://raw.githubusercontent.com/libertine-linux/libertine/master/COPYRIGHT. No part of libertine, including this file, may be copied, modified, propagated, or distributed except according to the terms contained in the COPYRIGHT file.
# Copyright Â© 2016-2018 The developers of libertine. See the COPYRIGHT file in the top-level directory of this distribution and at https://raw.githubusercontent.com/libertine-linux/libertine/master/COPYRIGHT.


core_dependency_requires '*' rm qemu-img
test_with_qemu_drive()
{
	local index="$1"
	local size="$2"
	local format="$3"
	
	if [ $# -eq 4 ]; then
		local options="$4"
	else
		local options=''
	fi
	
	local hardDriveFilePath="$qemuFolderPath"/drive."${index}"."${format}"
	if $test_with_qemu_force; then
		rm -rf "$hardDriveFilePath"
	fi
	
	if [ ! -e "$hardDriveFilePath" ]; then
		
		set -- create -q -f "$format"
		if [ -n "$options" ]; then
			set -- "$@" -o "$options"
		fi
		
		qemu-img "$@" "$hardDriveFilePath" "$size"
	fi	
}

test_with_qemu_cpu()
{
	test_with_qemu_cpuOption="$1"
}

test_with_qemu_keyboard()
{
	test_with_qemu_keyboardOption="$1"
}